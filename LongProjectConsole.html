<!DOCTYPE html>
<!--Alex Le and Patrick Russel
	alhle/pcrussel-->
<html>
<head>
  <title>ADVENTURE</title><meta charset="utf-8">
  <style>
  body,div { background-color: #000; font-family: sans; padding: 1em; }
  </style>
</head>
<body>
<center>
<!--
   <font color=#0F0 size=16>
      <p id="console"></p>
   </font>
-->
<textarea id="console" rows="5" cols="100" style="resize:none; background-color: black; color: green; font-size: 16;">
</textarea>


<p></p>
<input type="text" id="input" value = "" size="75" />
<button onclick="enterFunction()">Enter</button>
</center>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js">
</script>
  
<script>
//global input and output variables
var console = document.getElementById("console");
var input = document.getElementById("input");

//test rooms
var currentRoom = new room("Starting Room", "This room is where you start");
var northRoom = new room("North Room", "This room is north of the starting room");

$(function() {
//test link
currentRoom.linkNorth(northRoom);
northRoom.linkSouth(currentRoom);
currentRoom.printRoom();
});

//room class
function room(name, description){
   name: "default";
   desc: "defaultDesc";
   
   north: null;
   south: null;
   east: null;
   west: null;
   
   this.name = name;
   this.desc = description;
}
//room linking functions
room.prototype.linkNorth = function(room){
   this.north = room;
   return true;
}
room.prototype.linkSouth = function(room){
   this.south = room;
   return true;
}
room.prototype.linkEast = function(room){
   this.east = room;
   return true;
}
room.prototype.linkWest = function(room){
   this.west = room;
   return true;
}

//room movement with tests (use this)
room.prototype.goDir = function(dir) {
   //0 = north
   if(dir === 0 && this.north != null){
      goNorth();
      return true;
   //1 = east
   }else if(dir === 1 && this.east != null){
      goEast();
      return true;
   //2 = south
   }else if(dir === 2 && this.south != null){
      goSouth();
      return true;
   //3 = west
   }else if(dir === 3 && this.west != null){
      goWest();
      return true;
   }else{
      return false;
   }
}

// base movement functions
function goNorth(){
   currentRoom = currentRoom.north;
   return currentRoom;
}
function goSouth(){
   currentRoom = currentRoom.south;
   return currentRoom;
}
function goEast(){
   currentRoom = currentRoom.east;
   return currentRoom;
}
function goWest(){
   currentRoom = currentRoom.west;
   return currentRoom;
}

room.prototype.printRoom = function(){
   console.innerHTML = this.desc;
}

//function that simplifies the movement process
function moveAndPrint(dir){
         //try to move the specified direction
         if(currentRoom.goDir(dir)){}
         //if impossible, say so
         else {console.innerHTML = "You can't go that way.";}
         //reset console for convenience
         input.value = "";
         //display new room
         currentRoom.printRoom();
}

//function that interprets input and releases output
function enterFunction() {
      //check the input
	  if (input.value == "look" ){
	     currentRoom.printRoom();
		 input.value = "";
	  }
      else if(input.value == "go north"){
         moveAndPrint(0);
      }else if(input.value == "go east"){
         moveAndPrint(1);
      }else if(input.value == "go south"){
         moveAndPrint(2);
      }else if(input.value == "go east"){
         moveAndPrint(3);
      }else{
         console.innerHTML = "um... what?";
		 input.value = "";
      }
}

//functionality that allows the user to hit "enter" rather than click the Enter button
$('input[type=text]').on('keydown', function(e) {
    if (e.which == 13) {
      enterFunction();   
      e.preventDefault();
    }
});
</script>


</html>
